<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>elbe-control(1) â€¢ ELBE</title>
    
    
    
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="elbe-control(1)">
	
	
	
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image" content="https://elbe-rfs.org/images/elbe-icon.png">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="en_US.UTF-8">
	<meta property="og:type" content="article">
	<meta property="og:title" content="elbe-control(1)">
	
	<meta property="og:url" content="https://elbe-rfs.org/docs/elbe-control.html">
	<meta property="og:site_name" content="ELBE">

    <link rel="canonical" href="https://elbe-rfs.org/docs/elbe-control.html">

    <link href="https://elbe-rfs.org/atom.xml" type="application/atom+xml" rel="alternate" title="ELBE Atom Feed">
    <link href="https://elbe-rfs.org/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <link rel="stylesheet" href="https://elbe-rfs.org/css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="https://elbe-rfs.org/js/vendor/html5shiv.min.js"></script>
      <script src="https://elbe-rfs.org/js/vendor/respond.min.js"></script>
    <![endif]-->

  </head>

  <body id="js-body">
    <!--[if lt IE 9]><div class="upgrade notice-warning"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

    <header id="masthead">
  <div class="inner-wrap">
    <a href="https://elbe-rfs.org/" class="site-title"><img src="https://elbe-rfs.org/images/elbe-logo-small.png"></a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/">ELBE</a></li>
	
    
        
    
    <li><a href="https://elbe-rfs.org/download" >Download</a></li>
  
    
        
    
    <li><a href="https://elbe-rfs.org/docs" >Docs</a></li>
  
    
        
    
    <li><a href="https://elbe-rfs.org/support" >Support</a></li>
  
    
        
    
    <li><a href="https://elbe-rfs.org/devel" >Devel</a></li>
  
</ul>
    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->

    <nav role="navigation" id="js-menu" class="sliding-menu-content">
  <h5>ELBE <span>Table of Contents</span></h5>
  <ul class="menu-item">
    <li>
      <a href="https://elbe-rfs.org/download">
        
        <div class="title">Download</div>
        <p class="excerpt">Get Binary and Source packages</p>
      </a>
    </li><li>
      <a href="https://elbe-rfs.org/docs">
        
        <div class="title">Docs</div>
        <p class="excerpt">Documentation and man-pages</p>
      </a>
    </li><li>
      <a href="https://elbe-rfs.org/support">
        
        <div class="title">Support</div>
        <p class="excerpt">Community and commercial support</p>
      </a>
    </li><li>
      <a href="https://elbe-rfs.org/devel">
        
        <div class="title">Devel</div>
        <p class="excerpt">Development details</p>
      </a>
    </li>
  </ul>
</nav>
<button type="button" id="js-menu-trigger" class="sliding-menu-button lines-button x2" role="button" aria-label="Toggle Navigation">
  <span class="nav-lines"></span>
</button>

<div id="js-menu-screen" class="menu-screen"></div>


    <div id="page-wrapper">
      <h1>elbe-control(1)</h1>
<div class="sect1">
<h2 id="name">NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>elbe-control - Low level interface to elbe Soap Daemon running in initvm</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>elbe control</em> [options] <em>list_projects</em><br>
<em>elbe control</em> [options] <em>create_project</em> &lt;xmlfile&gt;<br>
<em>elbe control</em> [options] <em>build_sysroot</em> &lt;build-dir&gt;<br>
<em>elbe control</em> [options] <em>set_pdebuild</em> &lt;project-dir&gt; &lt;pdebuild file&gt;<br>
<em>elbe control</em> [options] <em>get_files</em> &lt;build-dir&gt;<br>
<em>elbe control</em> [options] <em>set_cdrom</em> &lt;build-dir&gt; &lt;iso-img&gt;<br>
<em>elbe control</em> [options] <em>reset_project</em> &lt;build-dir&gt;<br>
<em>elbe control</em> [options] <em>list_users</em><br>
<em>elbe control</em> [options] <em>wait_busy</em> &lt;build-dir&gt;<br>
<em>elbe control</em> [options] <em>set_xml</em> &lt;build-dir&gt; &lt;xmlfile&gt;<br>
<em>elbe control</em> [options] <em>del_project</em> &lt;build-dir&gt;<br>
<em>elbe control</em> [options] <em>build_pbuilder</em> &lt;build-dir&gt;<br>
<em>elbe control</em> [options] <em>build</em> &lt;build-dir&gt;<br>
<em>elbe control</em> [options] <em>get_file</em> &lt;build-dir&gt; &lt;filename&gt;<br>
<em>elbe control</em> [options] <em>dump_file</em> &lt;build-dir&gt; &lt;filename&gt;<br>
<em>elbe control</em> [options] <em>shutdown_initvm</em></pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Low Level interface to<br>
control an elbe daemon running inside an initvm.<br>
It allows to submit xml files etc.</p>
</div>
<div class="paragraph">
<p>For the high level interface, see <em>elbe initvm</em></p>
</div>
<div class="paragraph">
<p>Please take notice, that a single user can only have a single project<br>
opened inside the soap server. So it is not possible to have a single user<br>
build 2 projects at once.</p>
</div>
<div class="paragraph">
<p>You can only wait on the project, that you are currently building.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="options">OPTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">--host &lt;hostname&gt;</dt>
<dd>
<p>ip or hostname of the elbe-deamon (defaults to localhost, which<br>
	is the default, where an initvm would be listening).</p>
</dd>
<dt class="hdlist1">--port &lt;N&gt;</dt>
<dd>
<p>Port of the soap interface on the elbe-daemon.</p>
</dd>
<dt class="hdlist1">--user &lt;username&gt;</dt>
<dd>
<p>Username to use for login (defaults to root).</p>
</dd>
<dt class="hdlist1">--pass &lt;password&gt;</dt>
<dd>
<p>Password for login (defaults to <em>foo</em>).</p>
</dd>
<dt class="hdlist1">--retries &lt;N&gt;</dt>
<dd>
<p>How many times to retry the connection to the server before giving up (default is 10 times, yielding 10 seconds).</p>
</dd>
<dt class="hdlist1">--build-bin</dt>
<dd>
<p>Build binary repository CDROM, for exact reproduction.</p>
</dd>
<dt class="hdlist1">--build-sources</dt>
<dd>
<p>Build source CDROM.</p>
</dd>
<dt class="hdlist1">--output &lt;directory&gt;</dt>
<dd>
<p>Output downloaded files to &lt;directory&gt;.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="commands">COMMANDS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><em>list_projects</em></dt>
<dd>
<p>List projects available on the elbe daemon.</p>
</dd>
<dt class="hdlist1"><em>create_project</em> &lt;xmlfile&gt;</dt>
<dd>
<p>Create a new project on soap server. &lt;xmlfile&gt; is uploaded,<br>
and a new build-dir is created.</p>
<div class="paragraph">
<p>The name of the created &lt;build-dir&gt; is printed to stdout, for further<br>
reference in subsequent commands.</p>
</div>
</dd>
<dt class="hdlist1"><em>build_sysroot</em> &lt;build-dir&gt;</dt>
<dd>
<p>Build a sysroot for the specified project.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The sysroot can be used with a toolchain for cross-compiles.</p>
</div>
<div class="paragraph">
<p><em>set_pdebuild</em> &lt;build-dir&gt; &lt;pdebuild file&gt;</p>
</div>
<div class="paragraph">
<p>Build a Debian Project using a pbuilder.</p>
</div>
<div class="paragraph">
<p>The pdebuild file needs to be a .tar.gz archive of a project<br>
containing a ./debian folder with a valid debianization.</p>
</div>
<div class="paragraph">
<p>+<br>
The generated debian packages are stored inside the initvm.</p>
</div>
<div class="paragraph">
<p>+<br>
Use get_files to retrieve them.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em>get_files</em> &lt;build-dir&gt;</dt>
<dd>
<p>Get list of files in the &lt;build-dir&gt;.</p>
<div class="paragraph">
<p>If the --output option is specified, the files are downloaded to<br>
the directory specified in the option.</p>
</div>
</dd>
<dt class="hdlist1"><em>set_cdrom</em> &lt;build-dir&gt; &lt;iso-img&gt;</dt>
<dd>
<p>Set the cdrom iso image. The &lt;iso-img&gt; is uploaded into the intivm.<br>
And the source.xml in the &lt;build-dir&gt; is modified, that it builds from<br>
the cdrom mirror now.</p>
</dd>
<dt class="hdlist1"><em>reset_project</em> &lt;build-dir&gt;</dt>
<dd>
<p>Reset project database status for &lt;build-dir&gt;.</p>
<div class="paragraph">
<p>When the database becomes inconsistent, this allows us to<br>
access an otherwise blocked project again.</p>
</div>
<div class="paragraph">
<p>Use with care.</p>
</div>
</dd>
<dt class="hdlist1"><em>list_users</em></dt>
<dd>
<p>List configured users. Only admins may use this command.</p>
</dd>
<dt class="hdlist1"><em>wait_busy</em> &lt;build-dir&gt;</dt>
<dd>
<p>Wait, while &lt;build-dir&gt; is busy.</p>
</dd>
<dt class="hdlist1"><em>set_xml</em> &lt;build-dir&gt; &lt;xmlfile&gt;</dt>
<dd>
<p>Upload a new xml File into the given &lt;build-dir&gt;.<br>
This is most likely going to change the status of the project to<br>
<em>needs_rebuild</em>.</p>
</dd>
<dt class="hdlist1"><em>del_project</em> &lt;build-dir&gt;</dt>
<dd>
<p>Delete project in &lt;build-dir&gt;</p>
</dd>
<dt class="hdlist1"><em>build_pbuilder</em> &lt;build-dir&gt;</dt>
<dd>
<p>Build a pbuilder environment for the given project &lt;build-dir&gt;.</p>
</dd>
<dt class="hdlist1"><em>build</em> &lt;build-dir&gt;</dt>
<dd>
<p>Trigger building the project.<br>
Status will change to busy.</p>
</dd>
<dt class="hdlist1"><em>get_file</em> &lt;build-dir&gt; &lt;filename&gt;</dt>
<dd>
<p>Download a single file from the project.</p>
</dd>
<dt class="hdlist1"><em>dump_file</em> &lt;build-dir&gt; &lt;filename&gt;</dt>
<dd>
<p>Dump a single File from the project to stdout.</p>
</dd>
<dt class="hdlist1"><em>shutdown_initvm</em></dt>
<dd>
<p>Make the initvm shutdown.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="examples">Examples</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>List current Projects</p>
<div class="listingblock">
<div class="content">
<pre>$ elbe control list_projects
/var/cache/elbe/982d64de-e69f-48c7-8942-66d8d480f3dc    rescue image    1.0     build_done      2015-06-08 15:29:29.613620
/var/cache/elbe/dd37a03e-31bd-45db-afd4-fc51d51fa90a    rescue image    1.0     build_done      2015-06-09 08:53:26.658500
/var/cache/elbe/8d62928f-4e75-47cf-aec9-d2365ca59003    rescue image    1.0     build_done      2015-06-09 09:14:15.371456</pre>
</div>
</div>
</li>
<li>
<p>Create a new Project, trigger build, and wait till it finishes.</p>
<div class="listingblock">
<div class="content">
<pre>$ elbe control create_project examples/rescue.xml
/var/cache/elbe/f310dcbc-f5fc-423e-99e4-fb72d7b9dd5f
$ elbe control build /var/cache/elbe/f310dcbc-f5fc-423e-99e4-fb72d7b9dd5f
$ elbe control wait_busy /var/cache/elbe/f310dcbc-f5fc-423e-99e4-fb72d7b9dd5f
project still busy, waiting
project still busy, waiting
...
project still busy, waiting
$ elbe control get_files /var/cache/elbe/f310dcbc-f5fc-423e-99e4-fb72d7b9dd5f
source.xml      (Current source.xml of the project)
rescue.cpio     (Image)
validation.txt  (Package list validation result)
elbe-report.txt         (Report)
log.txt         (Log file)</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph">
<p>linkgit:elbe-initvm[1]<br>
linkgit:git-daemon[1]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="elbe">ELBE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Part of the linkgit:elbe[1] suite</p>
</div>
</div>
</div>
      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
        
      
			<li><a href="https://elbe-rfs.org" ></a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<p class="copyright">
		&#169; 2016
		<a href="https://elbe-rfs.org">ELBE</a> by
		<a href="https://linutronix.de">Linutronix GmbH</a> -
		ELBE is not affiliated with Debian, Debian is a registered trademark owned by SPI
	</p>
</footer>



    </div>

    <script src="https://elbe-rfs.org/js/vendor/jquery-1.9.1.min.js"></script>
    <script src="https://elbe-rfs.org/js/main.js"></script>

  </body>

</html>
