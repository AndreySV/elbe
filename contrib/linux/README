
Linux Kernel Debianisation
--------------------------

This patch modifies the behaviour of the deb-pkg target of the linux kernel.

NOTE: It only works together with an out of tree build.

Running make deb-pkg will now generate a debian directory in the sourcetree.
This directory must be committed to the git repository.
When make deb-pkg is run again, it will use the files in the debian directory,
and not try to autogenerate the control file etc.

This will now allow you to build the debian packages using "dpkg-buildpackage"


The new target needs quite some input in the form of variables, which
need to be set, when make deb-pkg ist run. (These will get saved into the
generated debian/rules and the other autogenerated files)

So these need to only get specified once.

This is my example mk.sh File which i use as a wrapper for make:

---------------------------------------------------------------------                                                                        
#!/bin/sh                                                                                                                                    
                                                                                                                                             
export ARCH=arm                                                                                                                              
export CROSS_COMPILE=~/codesourcery/bin/arm-none-eabi-                                                                                       
export KBUILD_DEBARCH=armhf                                                                                                                  
export KDEB_PKGVERSION=4.1.6-20150911                                                                                                        
                                                                                                                                             
make KERNELRELEASE=4.1.6-elbepkg LOADADDR=0xFFFFFFFF                                                                                            
O=/scratch/torbenh/linux-build $@                                                                                                            
---------------------------------------------------------------------      

then i create the debianisation with:

./mk.sh KDEB_DEFCONFIG=xyz_defconfig                                                                                                           
git add debian/rules                                                                                                                           
git add debian/changelog                                                                                                                       
git add debian/control                                                                                                                         
git add debian/copyright                                                                                                                       
git add debian/source                                                                                                                          
git commit -m "add debianisation"               


